# ============================================
# AntiHub Plugin - Environment Configuration
# ============================================
# 复制此文件为 .env 并修改配置
# ============================================

# ---------------- PostgreSQL 配置 ----------------
# 使用你现有的 PostgreSQL 实例
DB_HOST=localhost
DB_PORT=5432
DB_NAME=antigv
DB_USER=postgres
DB_PASSWORD=your_postgres_password

# ---------------- Redis 配置 ----------------
# Redis 用于存储 Kiro OAuth 状态（临时数据）
# 多个项目可以共用一个 Redis 实例，使用 key prefix 隔离
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password

# ---------------- OAuth 配置 ----------------
# OAuth 回调地址（根据实际访问域名修改）
# 例如: https://your-domain.com/api/oauth/callback
OAUTH_CALLBACK_URL=http://localhost:8045/api/oauth/callback

# ---------------- 安全配置 ----------------
# 管理员 API Key（生产环境必须修改为强密钥）
ADMIN_API_KEY=sk-admin-your-secret-key-here

# ---------------- 服务配置 ----------------
# 服务端口
PORT=8045

# ---------------- Kiro 配额同步节流（可选） ----------------
# 背景同步会调用上游 /getUsageLimits 拉取剩余额度；频率过高可能触发 429
# 默认 300 秒同步一次；当遇到 429 时默认进入 300 秒冷却期
# 如需关闭节流（不推荐，可能更容易 429），可设置为 0
# KIRO_USAGE_LIMITS_SYNC_INTERVAL_SECONDS=300
# KIRO_USAGE_LIMITS_429_COOLDOWN_SECONDS=300

# Kiro IDE UA 版本（可选；默认内置 0.9.2）
# KIRO_IDE_VERSION=0.9.2

# ============================================
# 多项目共用 Redis 说明
# ============================================
# 如果你有多个项目共用一个 Redis，它们会自动用不同的 key prefix 隔离：
#
# - AntiHub-plugin: kiro:oauth:state:xxx
# - 其他项目: 使用各自的 prefix
#
# Redis 数据是临时的（OAuth state 10分钟过期），
# 共用不会造成数据冲突。
# ============================================
