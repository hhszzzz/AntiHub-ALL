# ========== 镜像 ==========
IMAGE_OWNER=zhongruan0522
IMAGE_TAG=latest

# ========== 端口（宿主机 -> 容器） ==========
WEB_PORT=3000
BACKEND_PORT=8000
POSTGRES_PORT=5432

# ========== Web ==========
# Cookie 协议：HTTPS 或 HTTP（用 IP 直连 HTTP 时改成 HTTP）
COOKIE_HTTP=HTTPS
# web 容器内部访问 backend 的地址；留空=自动推断
BACKEND_INTERNAL_URL=

# ========== PostgreSQL（compose 自带 postgres） ==========
# 如果你用的是 `docker-compose.core.yml`（不带 postgres），把 host 改成 host.docker.internal / 你的内网地址
POSTGRES_USER=antihub
POSTGRES_PASSWORD=please-change-me
POSTGRES_DB=antihub
DATABASE_URL=postgresql+asyncpg://antihub:please-change-me@postgres:5432/antihub

# ========== Redis ==========
# 如果你用的是 `docker-compose.core.yml`（不带 redis），这里改成你自己的 Redis 地址
REDIS_URL=redis://redis:6379/0

# ========== 旧 plugin DB 自动迁移（可选） ==========
# 用途：从旧 AntiHub-plugin 的 DB 导入账号/配额等数据到 Backend（启动期自动迁移）。
#
# 新部署：保持 PLUGIN_API_BASE_URL 为空即可（不会触发迁移判断）。
# 升级/迁移：启动 `AntiHub-plugin` 目录下的 “Env Exporter” 服务，并把 Backend 的 PLUGIN_API_BASE_URL 指向它：
#   - 容器内通常为：http://plugin-env:8045
PLUGIN_API_BASE_URL=
# 可选：迁移助手鉴权（对应请求头 X-Migration-Token）
PLUGIN_ENV_EXPORT_TOKEN=
# 兼容：如你已有旧部署的 PLUGIN_ADMIN_API_KEY，也可直接复用（迁移助手会优先用 PLUGIN_ENV_EXPORT_TOKEN）
PLUGIN_ADMIN_API_KEY=

# 仅迁移助手需要的旧 plugin DB 连接信息（由 Env Exporter 读取并返回给 Backend）
# 支持两套命名：DB_*（推荐）或 PLUGIN_DB_*（兼容旧部署）
#DB_HOST=postgres
#DB_PORT=5432
#DB_NAME=antigravity
#DB_USER=antigravity
#DB_PASSWORD=please-change-me
#
#PLUGIN_DB_HOST=
#PLUGIN_DB_PORT=
#PLUGIN_DB_NAME=
#PLUGIN_DB_USER=
#PLUGIN_DB_PASSWORD=

# ========== Backend 必配 ==========
JWT_SECRET_KEY=please-change-me
# Fernet key（32字节 urlsafe base64）；生产环境务必更换
# 生成：docker compose run --rm backend python generate_encryption_key.py
PLUGIN_API_ENCRYPTION_KEY=STAdjfQFXLnk2-2Vd8WaGPr0OJ4h_Cvk91WCcpds7G8=
DEBUG_LOG=false

# ========== Codex（可选） ==========
# CODEX_SUPPORTED_MODELS：JSON 数组或逗号分隔；留空=使用内置列表
CODEX_SUPPORTED_MODELS=
CODEX_API_BASE_URL=https://chatgpt.com/backend-api/codex
CODEX_PROXY_URL=

# ========== Kiro（可选） ==========
KIRO_IDE_VERSION=0.9.2
KIRO_PROXY_URL=

# ========== Antigravity OAuth（可选；留空=使用内置默认） ==========
# 用途：Antigravity（cloudcode-pa）账号登录/导入（OAuth code -> refresh_token）。
# 默认回调端口参考 CLIProxyAPIPlus：51121
ANTIGRAVITY_OAUTH_CLIENT_ID=
ANTIGRAVITY_OAUTH_CLIENT_SECRET=
ANTIGRAVITY_OAUTH_REDIRECT_URI=http://localhost:51121/oauth-callback
ANTIGRAVITY_OAUTH_SCOPE=

# ========== Gemini CLI OAuth（可选；留空=使用内置默认） ==========
GEMINI_CLI_OAUTH_CLIENT_ID=
GEMINI_CLI_OAUTH_CLIENT_SECRET=
GEMINI_CLI_OAUTH_REDIRECT_URI=http://localhost:8085/oauth2callback
GEMINI_CLI_OAUTH_SCOPE=

# ========== 管理员账号（可选；首次启动自动创建；留空=不创建） ==========
ADMIN_USERNAME=admin
ADMIN_PASSWORD=please-change-me-to-strong-password

# ========== ZAI TTS（可选） ==========
ZAI_TTS_BASE_URL=https://audio.z.ai
ZAI_TTS_FILE_KEEP_COUNT=10

# ========== ZAI Image（可选） ==========
ZAI_IMAGE_BASE_URL=https://image.z.ai
ZAI_IMAGE_USER_AGENT=
